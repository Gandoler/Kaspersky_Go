# WorkerPool

## Описание

`WorkerPool` — это реализация пула воркеров для параллельного выполнения задач. Он распределяет задачи между фиксированным числом воркеров и гарантирует корректное завершение работы
## Возможности

* **Добавление задач**: можно отправлять задачи в пул для выполнения.
* **Очередь**: если все воркеры заняты, задачи помещаются в очередь. Размер очереди ограничен.
* **Ошибки при добавлении**:

  * если очередь переполнена, возвращается ошибка «queue full»;
  * если пул уже остановлен, возвращается ошибка «pool stopped».
* **Остановка**: метод `Stop` дожидается выполнения всех ранее отправленных задач и корректно завершает работу воркеров.
* **Хук после выполнения задачи**: можно передать функцию, которая будет вызвана после каждой завершённой задачи.
* **Защита от паник**: паника внутри задачи или хука не приводит к остановке работы пула. с помощью (recover())

## Архитектура

* **Очередь**: буферизированный канал, в который задачи добавляются через `Submit`.
* **Воркеры**: фиксированное количество горутин, постоянно обрабатывающих задачи из очереди.
* **Синхронизация**:

  * используется `WaitGroup` для ожидания завершения всех задач;
  * `sync.Once` гарантирует, что остановка пула выполняется только один раз;
  * мьютекс защищает состояние пула от гонок.
* **Хук**: вызывается безопасно, с перехватом возможных ошибок.

## Поведение

1. Задача добавляется в очередь через `Submit`.
2. Если воркер свободен, он сразу начинает выполнение. Если все заняты, задача ждёт в очереди.
3. После выполнения задачи срабатывает хук (если задан).
4. При вызове `Stop` новые задачи не принимаются, очередь закрывается, и пул ждёт завершения всех текущих задач.
